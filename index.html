<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pricing Tool</title>
    <link rel="stylesheet" type="text/css" href="styles/style.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="scripts/scripts.js"></script>

</head>
<body>
<div class="container">
    <button onclick="add()">klick</button>
    <div id="main"></div>
    <div id="markets-buttons"></div>
    <div id="markets-buttons-ir"></div>
    <div id="markets-buttons-loi"></div>

</div>


<script>
  $(document).ready(function () {
    let data = {
      markets: [
        {
          name: "UK",
          ir: [10, 20],
          loi: ['uk0-5', 'uk6-9', 'uk10-15'],
          cpi: [
            [12, 13],
            [24, 25],
            [26, 27]
          ]
        },
        {
          name: "DE",
          ir: [22, 33, 44],
          loi: ['de0-5', 'de0-9'],
          cpi: [
            [122, 133, 144],
            [222, 233, 244]
          ]
        }
      ]
    };
    let marketREQ = 'UK';
    let irREQ = 20;
    let loiREQ = 'uk0-5';


    let marketsNames = [];
    for (let i in data.markets) {
      marketsNames[i] = data.markets[i].name;
      $(`<button id="market-button-${data.markets[i].name}" name="${data.markets[i].name}">${data.markets[i].name}</button>`).appendTo('#markets-buttons');
    }

    let myMarket = marketsNames.indexOf(marketREQ);
    let myCpi = data.markets[myMarket].cpi[data.markets[myMarket].ir.indexOf(irREQ)][data.markets[myMarket].loi.indexOf(loiREQ)];
    console.log(myMarket);
    console.log(data);

    $("#markets-buttons button").click(function (e) {
      $('#markets-buttons-ir').empty();
      $('#markets-buttons-loi').empty();
      let currentMarket = marketsNames.indexOf(e.currentTarget.name);
      $('<div>IR</div>').appendTo('#markets-buttons-ir');
      for (let i in data.markets[currentMarket].ir) {
        $(`<button id="ir-button-${data.markets[currentMarket].ir[i]}" name="${data.markets[currentMarket].ir[i]}">${data.markets[currentMarket].ir[i]}</button>`).appendTo('#markets-buttons-ir');
      }
      $('<div>LOI</div>').appendTo('#markets-buttons-loi');
      for (let i in data.markets[currentMarket].loi) {
        $(`<button id="loi-button-${data.markets[currentMarket].loi[i]}" name="${data.markets[currentMarket].loi[i]}">${data.markets[currentMarket].loi[i]}</button>`).appendTo('#markets-buttons-loi');
      }
    });


  })
  ;
</script>
</body>
</html>